package Ph2_CSC212;
import java.io.File;
import java.util.*;

	public class CustomerData {
		
			public static Scanner input = new Scanner(System.in) ;
			
			
			private AVLTree<Customer> CustomerData = new AVLTree<>() ;
			 
			 public AVLTree<Customer> getCustomerList(){ 
		     	 return CustomerData ;
			 }
			 
			 public Customer getCustomer() {

				    if (CustomerData.empty()) {
				        System.out.println("There are no customers in the list.");
				        return null;
				    }

				    System.out.print("Enter Customer ID: ");
				    int ID = input.nextInt();
				    input.nextLine();

				    Customer c = searchCustomerRecursive(CustomerData.getRoot(), ID);

				    if (c == null) {
				        System.out.println("Customer not found.");
				        return null;
				    }

				    return c;
				}

			 
			 
			 //read file
			 public CustomerData(String fileName)
			 {
			     try {
			         File file = new File(fileName);
			         Scanner reader = new Scanner(file);

			         // read header
			         String line = reader.nextLine();

			         while (reader.hasNext()) {

			             line = reader.nextLine();
			             String[] data = line.split(",");

			             Customer customer = new Customer(
			                     Integer.parseInt(data[0]),
			                     data[1],
			                     data[2]
			             );

			             CustomerData.insert(customer.getCustomerId(), customer);
			         }

			         reader.close();
			     }
			     catch (Exception ex) {
			         System.out.println(ex.getMessage());
			     }
			 }

			 
			 public void addCustomer(Customer c) {

			        boolean inserted = CustomerData.insert(c.getCustomerId(), c);

			        if (inserted)
			            System.out.println("Customer added: " + c.getName());
			        else
			            System.out.println("Customer ID already exists!");
			    }
			 
			 
			 public void OrderHistory() {

				    if (CustomerData.empty()) {
				        System.out.println("There are no customers in the list.");
				        return;
				    }

				    System.out.print("Enter Customer ID: ");
				    int ID = input.nextInt();
				    input.nextLine();

				    Customer c = searchCustomerRecursive(CustomerData.getRoot(), ID);

				    if (c == null) {
				        System.out.println("Customer not found.");
				        return;
				    }

				    System.out.println("Order History for " + c.getName() + ":");
				    c.viewOrderHistory();
				}


			 
			 public Customer CustomerIDCheck(int ID) {

				    if (CustomerData.empty())
				        return null;

				    boolean found = CustomerData.findKey(ID);

				    if(found)
				    	return CustomerData.retrieve();
				    else 
				    	return null ;
				}
			 
			 private Customer searchCustomerRecursive(AVLNode<Customer> node, int ID) {

				    if (node == null)
				        return null;

				    if (ID == node.key)
				        return node.data;

				    if (ID < node.key)
				        return searchCustomerRecursive(node.left, ID);

				    return searchCustomerRecursive(node.right, ID);
				}





			
			
			
		}





