package ds2;

import java.util.Scanner;



public class test {
    public static Scanner input = new Scanner(System.in);


    // Data from files (Phase I dataset)
    public static CustomerData cdata = new CustomerData("customers.csv");
    public static productsData pdata = new productsData("prodcuts.csv");
    public static OrderData odata = new OrderData("orders.csv");
    public static reviewsData rdata = new reviewsData("reviews.csv");

    // BST / AVL Structures (Phase II requirement)
   public static AVLTree<Customer> customers = cdata.getCustomerList();
    public static AVLTree<Product> products = pdata.getProductsList();
   public static AVLTree<Order> orders = odata.getOrdersIDs();
    public static LinkedList<Review> reviews = rdata.getReviewList();
    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);
        int choice = -1;

        while (choice != 0) {
            System.out.println("\n============================");
            System.out.println("          MAIN MENU");
            System.out.println("============================");
            System.out.println("1) Customer System");
            System.out.println("2) Product System");
            System.out.println("3) Order System");
            System.out.println("4) Review System");
            System.out.println("0) Exit");
            System.out.print("Enter choice: ");

            choice = input.nextInt();
            System.out.println();

            switch (choice) {

                case 1:
                    customerMenu();
                    break;

                case 2:
                    productMenu();
                    break;

                case 3:
                    orderMenu();
                    break;

                case 4:
                    reviewMenu();
                    break;

                case 0:
                    System.out.println("Exiting program...");
                    break;

                default:
                    System.out.println("Invalid choice. Try again.");
            }
        }
    }

    // ============================
    // PLACEHOLDER MENUS (empty)
    // ============================

    public static void customerMenu() {
        System.out.println("Customer system opened...");
    }

    public static void productMenu() {
        System.out.println("Product system opened...");
        int ch;
        do {
        	System.out.println("1) Add a new product ");
        	System.out.println("2) Remove a product ");
        	System.out.println("3) Update product ");
        	System.out.println("4) Search by Id ");
        	System.out.println("5) Search by name ");
        	System.out.println("6) Track out of stock products ");
        	System.out.println("7) List all products wihin a price range ");
        	System.out.println("8) Display customers who reviewed a product ");
        	System.out.println("0) Return to main menu");
        	ch = input.nextInt();
  switch(ch) {
  case 1:
  	pdata.addProduct();
  	break;
  	
  case 2:
  	pdata.removeProduct();
  	break;
  
  case 3:
	  pdata.updateProduct();
	  break;
	 
  case 4 :{
	 Product p = pdata.searchProductbyID();
	  if(p == null)
		  System.out.println(" product is not found ");}
	  break;
	 
  case 5:{
	 Product p = pdata.searchProductbyName();
	  if(p != null) {
		  System.out.println(p.toString());  
	  }
	  else
		  System.out.println(" product is not found ");}
	  break;
  case 6:
	  pdata.outOfStockProducts();
	  break;
	  
  case 7:
	  pdata.productsByPrice();
	  break;
	  
  case 8:
	  customerReviewedProduct_ID();
	  break;
	  
  case 0 :
      System.out.println("Returning to main menu...");
	  break;
	  
  default:
      System.out.println("Invalid choice.");  
  }//switch
        	
        	
        	
        }while(ch!=0);//do
    }

    public static void orderMenu() {
        System.out.println("Order system opened...");
    }

    public static void reviewMenu() {
        System.out.println("Review system opened...");
    }
    
 
 
    public static void customerReviewedProduct_ID() {
  AVLTree<Customer> c = new AVLTree<Customer>();
  
  System.out.println("Enter product Id :");
  int pid = input.nextInt();
  
  while(!products.findKey(pid)) {
	  System.out.println("Product is not found Re enter product Id :");
	  pid = input.nextInt();
  }
 if(reviews.empty()) {
	  System.out.println("No reviews are found :");
	 return;
 }
 reviews.findFirst();
 while(!reviews.last()) {
	 if(reviews.retrieve().getProductId() == pid)
		 if(customers.findKey(reviews.retrieve().getCustomerId()))
			 c.insert(reviews.retrieve().getCustomerId(),customers.retrieve());
	 reviews.findNext();
 }
 if(reviews.retrieve().getProductId() == pid)
	 if(customers.findKey(reviews.retrieve().getCustomerId()))
		 c.insert(reviews.retrieve().getCustomerId(),customers.retrieve());
 
 c.printAllKeysData();
 
    }
////////////////////////////////////////////
}
	

